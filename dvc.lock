schema: '2.0'
stages:
  download:
    cmd: python neo4jam/cli.py download /home/devel/neo4jam/data/text2cypher/raw/downloaded.csv
    deps:
    - path: neo4jam/cli.py
      hash: md5
      md5: 8ae5d83ea08879dd2cb0f93a18fd6156
      size: 1912
      isexec: true
    - path: neo4jam/data/download.py
      hash: md5
      md5: 59825fc2b4f34d6776f4c896bbfcb3bf
      size: 3186
      isexec: true
    outs:
    - path: data/text2cypher/raw/downloaded.csv
      hash: md5
      md5: 801c9081d72a7a5834bc887fe7a80167
      size: 90326367
  preprocess:
    cmd: python neo4jam/cli.py preprocess /home/devel/neo4jam/data/text2cypher/raw/downloaded.csv
      /home/devel/neo4jam/data/text2cypher/processed
    deps:
    - path: data/text2cypher/raw/downloaded.csv
      hash: md5
      md5: 801c9081d72a7a5834bc887fe7a80167
      size: 90326367
    - path: neo4jam/cli.py
      hash: md5
      md5: 8ae5d83ea08879dd2cb0f93a18fd6156
      size: 1912
      isexec: true
    - path: neo4jam/data/preprocess.py
      hash: md5
      md5: 3666a40c742b649a947409aa82f00a9c
      size: 1916
      isexec: true
    outs:
    - path: data/text2cypher/processed
      hash: md5
      md5: 0bd5c85a80fe32f22a00419fbbed7a86.dir
      size: 71363084
      nfiles: 17
  sample:
    cmd: mkdir /home/devel/neo4jam/data/text2cypher/sampled && python neo4jam/cli.py
      sample /home/devel/neo4jam/data/text2cypher/processed /home/devel/neo4jam/data/text2cypher/sampled
    deps:
    - path: data/text2cypher/processed
      hash: md5
      md5: 0bd5c85a80fe32f22a00419fbbed7a86.dir
      size: 71363084
      nfiles: 17
    - path: neo4jam/cli.py
      hash: md5
      md5: 8ae5d83ea08879dd2cb0f93a18fd6156
      size: 1912
      isexec: true
    - path: neo4jam/data/preprocess.py
      hash: md5
      md5: 3666a40c742b649a947409aa82f00a9c
      size: 1916
      isexec: true
    params:
      .config/config.json:
        experiments.seed: 42
        preprocessing.sample_sz: 50
    outs:
    - path: data/text2cypher/sampled
      hash: md5
      md5: e41638295259d58e2283a84c7225bd90.dir
      size: 2325473
      nfiles: 17
  generate:
    cmd: mkdir /home/devel/neo4jam/data/text2cypher/generated && python neo4jam/cli.py
      generate /home/devel/neo4jam/data/text2cypher/sampled /home/devel/neo4jam/data/text2cypher/generated
    deps:
    - path: data/text2cypher/sampled
      hash: md5
      md5: e41638295259d58e2283a84c7225bd90.dir
      size: 2325473
      nfiles: 17
    - path: neo4jam/ai/generator.py
      hash: md5
      md5: 6523117859681e546842f76accea273f
      size: 2008
      isexec: true
    - path: neo4jam/cli.py
      hash: md5
      md5: 8ae5d83ea08879dd2cb0f93a18fd6156
      size: 1912
      isexec: true
    - path: neo4jam/models
      hash: md5
      md5: 53bf95c6582c7c57709c7b93f3e49ccf.dir
      size: 11745
      nfiles: 6
    - path: neo4jam/prompt.py
      hash: md5
      md5: 9903b79a4344e24a58d220a134e92212
      size: 2395
    params:
      .config/config.json:
        generation.model: gemini-2.0-flash
        generation.provider: GeminiAPI
    outs:
    - path: data/text2cypher/generated
      hash: md5
      md5: f457b2171c69db4ed2e2ba2d53fb5c29.dir
      size: 2432200
      nfiles: 17
  evaluate:
    cmd: mkdir /home/devel/neo4jam/data/text2cypher/evaluation && python neo4jam/cli.py
      evaluate /home/devel/neo4jam/data/text2cypher/generated /home/devel/neo4jam/data/text2cypher/evaluation
    deps:
    - path: data/text2cypher/generated
      hash: md5
      md5: f457b2171c69db4ed2e2ba2d53fb5c29.dir
      size: 2432200
      nfiles: 17
    - path: neo4jam/cli.py
      hash: md5
      md5: 8ae5d83ea08879dd2cb0f93a18fd6156
      size: 1912
      isexec: true
    - path: neo4jam/evaluation/evaluate.py
      hash: md5
      md5: 84997c45384235523ee9c2eb128c5829
      size: 2936
      isexec: true
    - path: neo4jam/evaluation/metrics.py
      hash: md5
      md5: 4ef64929c02b5f77ef3e9309b6c46fae
      size: 1882
      isexec: true
    params:
      .config/config.json:
        evaluation.report: ./report.json
    outs:
    - path: data/text2cypher/evaluation
      hash: md5
      md5: e15021254eeedf03ad3db473e5cc72bb.dir
      size: 2728338
      nfiles: 17
  aggregate:
    cmd: python neo4jam/cli.py aggregate /home/devel/neo4jam/data/text2cypher/evaluation
    deps:
    - path: data/text2cypher/evaluation
      hash: md5
      md5: e15021254eeedf03ad3db473e5cc72bb.dir
      size: 2728338
      nfiles: 17
    - path: neo4jam/cli.py
      hash: md5
      md5: 8ae5d83ea08879dd2cb0f93a18fd6156
      size: 1912
      isexec: true
    - path: neo4jam/evaluation/aggregate.py
      hash: md5
      md5: bcabb3c11d5b0765a830f43b7457ed7a
      size: 1984
    outs:
    - path: ./report.json
      hash: md5
      md5: e37e66c9ca4974f2ca794dc2b56c01f9
      size: 6086
  deepgen:
    cmd: mkdir -p /home/devel/neo4jam/data/text2cypher/deepgen/real && mkdir -p /home/devel/neo4jam/data/text2cypher/deepgen/generated
      && python neo4jam/cli.py deepgenerate /home/devel/neo4jam/data/text2cypher/generated
      /home/devel/neo4jam/data/text2cypher/deepgen
    deps:
    - path: data/text2cypher/generated
      hash: md5
      md5: f457b2171c69db4ed2e2ba2d53fb5c29.dir
      size: 2432200
      nfiles: 17
    - path: neo4jam/cli.py
      hash: md5
      md5: 8ae5d83ea08879dd2cb0f93a18fd6156
      size: 1912
      isexec: true
    - path: neo4jam/deepeval/deepgen.py
      hash: md5
      md5: 4f430d2d476d6927d6927067c7add019
      size: 4314
    outs:
    - path: data/text2cypher/deepgen
      hash: md5
      md5: 263bbce6141c68468557c8fc33b45cd0.dir
      size: 468583743
      nfiles: 1173
